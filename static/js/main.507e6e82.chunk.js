(this.webpackJsonptotsystems=this.webpackJsonptotsystems||[]).push([[0],{120:function(e,s,t){},121:function(e,s,t){},19:function(e,s,t){e.exports={img:"MessageItem_img__19fUI",message:"MessageItem_message__1f8DP",messageItem:"MessageItem_messageItem__2Tv34",nameAndEdit:"MessageItem_nameAndEdit__qsiOE",editPanel:"MessageItem_editPanel__2XxyV",editButton:"MessageItem_editButton__zSIBB",deleteButton:"MessageItem_deleteButton__3s6hh"}},232:function(e,s,t){"use strict";t.r(s);var a=t(0),n=t.n(a),r=t(29),c=t.n(r),o=(t(120),t(121),t(22)),i=t(8),d=t(11),l=t(9),u=t(57),j=t(7),m="SEND-MESSAGE",g="DELETE-MESSAGE",b="EDIT-MESSAGE",h="REVERSE_MESSAGE",O={users:[{senderId:0,name:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",profileImg:"https://cdn.hipwallpaper.com/i/14/36/FA8iOV.jpg"},{senderId:1,name:"Yulia",profileImg:"https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200"},{senderId:2,name:"Egor",profileImg:"https://static1.bigstockphoto.com/6/5/1/large1500/15601130.jpg"},{senderId:3,name:"Sasha",profileImg:"https://yt3.ggpht.com/ytc/AAUvwnjoWSUD_sN4qv6h-6aDmJcS8WzE0mz5dkh8gA5J=s900-c-k-c0x00ffffff-no-rj"},{senderId:4,name:"Katya",profileImg:"https://klike.net/uploads/posts/2019-03/1551511784_4.jpg"}],messages:[{id:1,message:"\u0415\u0434\u0438\u043d\u043e\u0433\u043b\u0430\u0441\u043d\u043e!",sender:5},{id:2,message:"\u041f\u0440\u043e\u0434\u0430\u0451\u043c",sender:2},{id:3,message:"\u041f\u0440\u043e\u0434\u0430\u0451\u043c",sender:4},{id:4,message:"\u041f\u0440\u043e\u0434\u0430\u0451\u043c",sender:1},{id:5,message:"\u041f\u043e\u0441\u0442\u0443\u043f\u0438\u043b\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043a\u0443\u043f\u0438\u0442\u044c \u043d\u0430\u0448 \u0430\u043b\u043b\u044e\u043c\u0438\u043d\u0438\u0435\u0432\u044b\u0439 \u0437\u0430\u0432\u043e\u0434. \u0427\u0442\u043e \u0440\u0435\u0448\u0430\u0435\u043c?",sender:5},{id:6,message:"\u043a\u0430\u043a \u0436\u0435 \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0443",sender:5},{id:7,message:"\u041d\u043e\u043b\u044c \u0438\u0434\u0435\u0439",sender:4},{id:8,message:"\u041f\u0440\u043e\u0448\u0443 \u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f, \u0442\u0443\u0442 \u043f\u0440\u0438\u043d\u0442\u0435\u0440 \u0437\u0430\u0436\u0438\u0432\u0430\u043b\u043e\u2026 \u041d\u0435 \u0437\u043d\u0430\u0435\u0442\u0435 \u043a\u0430\u043a \u0441 \u044d\u0442\u0438\u043c \u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f?",sender:1},{id:9,message:"\u041f\u0440\u0438\u0432\u0435\u0442",sender:3},{id:10,message:"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435",sender:4},{id:11,message:"\u0412\u0441\u0435\u043c \u043f\u0440\u0438\u0432\u0435\u0442",sender:1},{id:12,message:"Slaaave",sender:5},{id:13,message:"\u041d\u0435 \u043b\u0438\u0441\u0442\u0430\u0439\u0442\u0435 \u0434\u0430\u043b\u044c\u0448\u0435. \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u0432\u0443\u0445 \u0447\u0430\u0442\u043e\u0432 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043e\u0434\u043d\u0438\u043c \u043c\u0430\u0441\u0441\u0438\u0432\u043e\u043c \u043d\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441 \u0440\u0430\u0437\u043d\u044b\u0445 \u043a\u043e\u043d\u0446\u043e\u0432",sender:1},{id:14,message:"\u0412\u0441\u0435\u043c \u043f\u0440\u0438\u0432\u0435\u0442, \u043a\u0430\u043a \u0432\u0430\u043c \u043f\u043e\u0433\u043e\u0434\u0430?",sender:2},{id:15,message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0441\u0443\u043f\u0435\u0440",sender:4},{id:16,message:"\xab\u0420\u0430\u0437\u0433\u043e\u0432\u043e\u0440 \u043e \u043f\u043e\u0433\u043e\u0434\u0435 \u2014 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0443\u0431\u0435\u0436\u0438\u0449\u0435 \u043b\u044e\u0434\u0435\u0439, \u043b\u0438\u0448\u0435\u043d\u043d\u044b\u0445 \u0432\u043e\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\xbb \u2014 \u041e\u0441\u043a\u0430\u0440 \u0423\u0430\u0439\u043b\u044c\u0434.",sender:3},{id:17,message:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",sender:2},{id:18,message:"...",sender:5},{id:19,message:"\u0445\u0438\u0445\u0438",sender:3},{id:20,message:"\u041f\u043e\u043a\u0438\u0434\u0430\u0439\u0442\u0435 \u0444\u0430\u043a\u0442\u044b \u043e \u043a\u043e\u0442\u0430\u0445 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430",sender:1},{id:21,message:"\u041a\u043e\u0448\u043a\u0430 \u043d\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u0430 \u043f\u043e\u0442\u0435\u0442\u044c. \u0423\u0432\u043b\u0430\u0436\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434\u0443\u0448\u0435\u0447\u043a\u0430 \u043b\u0430\u043f\u044b.",sender:3},{id:22,message:"\u0410\u0432\u0441\u0442\u0440\u0430\u043b\u0438\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u0430\u043d\u043e\u0439, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043e\u043a\u043e\u043b\u043e 90% \u0436\u0438\u0442\u0435\u043b\u0435\u0439 \u043f\u043e\u0441\u0435\u043b\u0438\u043b\u0438 \u0432 \u0441\u0432\u043e\u0438\u0445 \u0434\u043e\u043c\u0430\u0445 \u043a\u043e\u0448\u0435\u043a.",sender:4},{id:23,message:"\u0421\u0435\u0440\u0434\u0446\u0435 \u043a\u043e\u0448\u043a\u0438 \u0431\u044c\u0435\u0442\u0441\u044f \u043e\u043a\u043e\u043b\u043e 140 \u0443\u0434\u0430\u0440\u043e\u0432 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443. \u0414\u043b\u044f \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f, \u0447\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u043e\u0435 \u0441\u0435\u0440\u0434\u0446\u0435 \u0431\u044c\u0435\u0442\u0441\u044f \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c 75 \u0443\u0434\u0430\u0440\u043e\u0432 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443.",sender:1},{id:24,message:"\u0423 \u0432\u0441\u0435\u0445 \u043a\u043e\u0448\u0435\u043a \u0434\u0430\u043b\u044c\u043d\u043e\u0437\u043e\u0440\u043a\u043e\u0441\u0442\u044c, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0438\u043c \u0442\u044f\u0436\u0435\u043b\u043e \u0440\u0430\u0437\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b, \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u0441\u044f \u0440\u044f\u0434\u043e\u043c.",sender:5}]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case m:var t=s.newMessageBody;return Object(j.a)(Object(j.a)({},e),{},{newMessageBody:"",messages:[].concat(Object(u.a)(e.messages),[{id:e.messages.length+1,message:t,sender:1}])});case g:return Object(j.a)(Object(j.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!=s.id}))});case b:return Object(j.a)(Object(j.a)({},e),{},{messages:e.messages.map((function(e){return e.id===s.payload.id?Object(j.a)(Object(j.a)({},e),{},{message:s.payload.newMessage}):e}))});case h:return Object(j.a)(Object(j.a)({},e),{},{messages:s.body});default:return e}},p="LOGIN",_="LOGOUT",v={login:null,userId:null,isAuth:!1,error:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case p:return"test"===s.payload.login&&"123"===s.payload.password?Object(j.a)(Object(j.a)(Object(j.a)({},e),s.payload),{},{userId:0,isAuth:!0,error:!1}):Object(j.a)(Object(j.a)({},e),{},{error:!0});case _:return Object(j.a)(Object(j.a)({},e),{},{login:null,userId:null,isAuth:!1,error:!1});default:return e}},N=t(235),I=Object(l.b)({chatPage:f,auth:x,form:N.a}),y=Object(l.d)(I),w=y;window.store=y;var M=t(53),S=t(54),E=t(58),k=t(56),B=t(87),A=t(19),C=t.n(A),L=t(1),P=function(e){var s=e.sender-1==e.userId,t=Object(a.useState)(!1),n=Object(B.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(e.message),i=Object(B.a)(o,2),d=i[0],l=i[1],u=function(){c(!r),r&&e.edit(e.messageId,d)};return Object(L.jsxs)("li",{className:C.a.messageItem,children:[Object(L.jsx)("img",{className:C.a.img,src:e.user[e.sender-1].profileImg,title:e.user[e.sender-1].name}),Object(L.jsxs)("div",{className:C.a.message,children:[Object(L.jsxs)("div",{className:C.a.nameAndEdit,children:[Object(L.jsx)("div",{className:C.a.name,children:e.user[e.sender-1].name}),s&&Object(L.jsxs)("div",{className:C.a.editPanel,children:[Object(L.jsx)("button",{className:C.a.editButton,onClick:u}),Object(L.jsx)("button",{className:C.a.deleteButton,onClick:function(){e.delete(e.messageId)}})]})]}),!r&&Object(L.jsx)("div",{className:C.a.messageText,children:e.message}),r&&Object(L.jsx)("div",{children:Object(L.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:u,onKeyDown:function(e){"Enter"===e.code&&u()},value:d})})]})]})},F=t(59),D=t.n(F),T=t(234),G=t(233),H=Object(G.a)({form:"dialogSendMessageForm"})((function(e){return Object(L.jsxs)("form",{onSubmit:function(s){e.handleSubmit(),e.reset(),s.preventDefault()},children:[Object(L.jsx)(T.a,{component:"textarea",name:"newMessageBody",placeholder:"Enter your message",onKeyPress:function(s){"Enter"===s.code&&(e.handleSubmit(),e.reset(),s.preventDefault())}}),Object(L.jsx)("button",{})]})})),U=function(e){var s=e.chatPage,t=s.messages;"/work"===e.history.location.pathname&&(t=Object(u.a)(s.messages).reverse());var a=t.map((function(t){return Object(L.jsx)(P,{user:s.users,message:t.message,sender:t.sender,userId:e.userId,delete:e.deleteMessage,messageId:t.id,edit:e.editMessage})}));return Object(L.jsxs)("div",{className:D.a.chat,children:[Object(L.jsx)("div",{id:"dialogarea",className:D.a.dialogarea,children:Object(L.jsx)("ul",{children:a})}),Object(L.jsx)("div",{className:D.a.addMessageForm,children:Object(L.jsx)(H,{onSubmit:function(s){void 0!==s.newMessageBody&&e.sendMessage(s.newMessageBody)}})})]})},z=t(84),J=function(e){Object(E.a)(t,e);var s=Object(k.a)(t);function t(){return Object(M.a)(this,t),s.apply(this,arguments)}return Object(S.a)(t,[{key:"componentDidMount",value:function(){z.animateScroll.scrollToBottom({containerId:"dialogarea"})}},{key:"componentDidUpdate",value:function(){z.animateScroll.scrollToBottom({containerId:"dialogarea"})}},{key:"render",value:function(){return Object(L.jsx)(U,Object(j.a)({},this.props))}}]),t}(n.a.Component),V=Object(l.c)(Object(d.b)((function(e){return{chatPage:e.chatPage,userId:e.auth.userId}}),(function(e){return{sendMessage:function(s){e(function(e){return{type:m,newMessageBody:e}}(s))},deleteMessage:function(s){e(function(e){return{type:g,id:e}}(s))},editMessage:function(s,t){e(function(e,s){return{type:b,payload:{id:e,newMessage:s}}}(s,t))},reverseMessageCreator:function(s){e(function(e){return{type:h,body:e}}(s))}}})),i.f)(J),q=t(24),R=t.n(q),K=function(e){return Object(L.jsx)("header",{className:R.a.header,children:Object(L.jsxs)("ul",{className:R.a.headerNav,children:[Object(L.jsx)("li",{className:R.a.headerNavLogo,children:Object(L.jsx)("a",{})}),e.auth?Object(L.jsxs)("li",{className:R.a.whenLoginBlock,children:[Object(L.jsx)("div",{className:R.a.loginName,children:e.chatPage.users[e.userId].name}),Object(L.jsx)("a",{onClick:e.logoutAC,className:R.a.loginBlock,children:"Log out"})]}):Object(L.jsx)("li",{children:Object(L.jsx)(o.b,{to:"/login",className:R.a.loginBlock,children:"Login"})})]})})},Z=function(e){Object(E.a)(t,e);var s=Object(k.a)(t);function t(){return Object(M.a)(this,t),s.apply(this,arguments)}return Object(S.a)(t,[{key:"render",value:function(){return Object(L.jsx)(K,Object(j.a)({},this.props))}}]),t}(n.a.Component),W=Object(d.b)((function(e){return{auth:e.auth.isAuth,userId:e.auth.userId,chatPage:e.chatPage}}),{logoutAC:function(){return{type:_}}})(Z),X=t(25),Y=t.n(X),Q=function(e){return e.isAuth?Object(L.jsxs)("nav",{className:Y.a.nav,children:[Object(L.jsx)(o.b,{to:"/work",className:Y.a.serious,activeClassName:Y.a.activeLink,children:Object(L.jsx)("div",{className:Y.a.field,children:"\u0420\u0430\u0431\u043e\u0447\u0438\u0439 \u0447\u0430\u0442"})}),Object(L.jsx)(o.b,{to:"/flood",className:Y.a.notserious,activeClassName:Y.a.activeLink,children:Object(L.jsx)("div",{className:Y.a.field,children:"\u0424\u043b\u0443\u0434\u0438\u043b\u044c\u043d\u044f"})})]}):Object(L.jsx)(i.a,{to:"/login"})},$=Object(d.b)((function(e){return{isAuth:e.auth.isAuth}}))(Q),ee=t(115),se=t(40),te=t.n(se),ae=function(e){var s=e.input,t=e.meta,a=e.el,r=Object(ee.a)(e,["input","meta","el"]),c=t.touched&&t.error;return Object(L.jsxs)("div",{className:te.a.formControl+" "+(c?te.a.error:""),children:[Object(L.jsx)("div",{children:n.a.createElement(a,Object(j.a)(Object(j.a)({},s),r))}),c&&Object(L.jsx)("span",{children:t.error})]})},ne=function(e){return Object(L.jsx)(ae,Object(j.a)({el:"input"},e))},re=function(e){if(!e)return"Field is required"},ce=Object(G.a)({form:"login"})((function(e){return Object(L.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(L.jsx)("div",{children:Object(L.jsx)(T.a,{placeholder:"login",name:"login",component:ne,validate:[re]})}),Object(L.jsx)("div",{children:Object(L.jsx)(T.a,{placeholder:"password",name:"password",type:"password",component:ne,validate:[re]})}),e.error1&&Object(L.jsx)("div",{className:te.a.formSummaryError,children:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(L.jsx)("div",{children:Object(L.jsx)("button",{children:"Login"})})]})})),oe=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,error:e.auth.error}}),{loginAC:function(e,s){return{type:p,payload:{login:e,password:s}}}})((function(e){return e.isAuth?Object(L.jsx)(i.a,{to:"/work"}):Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"Login"}),Object(L.jsx)(ce,{onSubmit:function(s){e.loginAC(s.login,s.password)},error1:e.error})]})}));var ie=function(){return Object(L.jsx)(o.a,{children:Object(L.jsx)(d.a,{store:w,children:Object(L.jsxs)("div",{className:"app-wrapper",children:[Object(L.jsx)(W,{}),Object(L.jsxs)("div",{className:"app-wrapper-content",children:[Object(L.jsx)($,{}),Object(L.jsx)(i.b,{path:"/work",render:function(){return Object(L.jsx)(V,{})}}),Object(L.jsx)(i.b,{path:"/flood",render:function(){return Object(L.jsx)(V,{})}}),Object(L.jsx)(i.b,{path:"/login",render:function(){return Object(L.jsx)(oe,{})}})]})]})})})},de=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,236)).then((function(s){var t=s.getCLS,a=s.getFID,n=s.getFCP,r=s.getLCP,c=s.getTTFB;t(e),a(e),n(e),r(e),c(e)}))};c.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(ie,{})}),document.getElementById("root")),de()},24:function(e,s,t){e.exports={header:"Header_header__2kAfb",headerNav:"Header_headerNav__13jlL",headerNavLogo:"Header_headerNavLogo__3cwN4",loginBlock:"Header_loginBlock__35ngn",whenLoginBlock:"Header_whenLoginBlock__O03f3",loginName:"Header_loginName__30vdI",logout:"Header_logout__3lv83"}},25:function(e,s,t){e.exports={nav:"Navbar_nav__1IZbv",serious:"Navbar_serious__2qEhg",notserious:"Navbar_notserious__2RUZf",activeLink:"Navbar_activeLink__10uI5",field:"Navbar_field__2jsRn"}},40:function(e,s,t){e.exports={formControl:"FormControls_formControl__f7VZ5",error:"FormControls_error__2tGyu",formSummaryError:"FormControls_formSummaryError__N8JeP"}},59:function(e,s,t){e.exports={chat:"Chat_chat__Gmah2",dialogarea:"Chat_dialogarea__2iUIB",addMessageForm:"Chat_addMessageForm__3Vdtz"}}},[[232,1,2]]]);
//# sourceMappingURL=main.507e6e82.chunk.js.map